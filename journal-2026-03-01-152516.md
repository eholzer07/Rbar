# Session Journal — 2026-03-01

## Chunk 11 — Social Features & Fan Connections

### Goals
- Follow/unfollow system (Follow model already in schema)
- Public user profile pages at /users/[username]
- Activity feed at /feed (auth-guarded)
- Dashboard "Friends' Activity" section
- "Feed" link added to global nav
- Middleware: add /feed to protected paths

### Deferred
- Private event invites (needs INVITED enum value → migration; defer to separate chunk)
- "Who else is watching near me?" (requires browser geolocation)
- Team fan community pages (requires region/geolocation)

### Work Log

### Completed

1. **middleware.ts** — Added `/feed` to protected paths.
2. **src/app/users/[username]/actions.ts** — `followAction` (upsert on `Follow` model), `unfollowAction` (deleteMany). Both bound with `(targetUserId, username)` — `username` needed to revalidate the right path.
3. **src/app/users/[username]/page.tsx** — Public profile showing avatar initial, name, @username, bio, homeCity, follower/following counts, Follow/Unfollow button (or Edit Profile link if own profile), favorite teams with logos, upcoming watch events (PUBLIC only for others, all for own profile), recent check-ins (last 30 days).
4. **src/app/feed/page.tsx** — Activity feed: fetches followingIds, then upcoming PUBLIC watch events from followed users (either hosting or GOING). Shows who from following is involved. Empty states: not following anyone / no upcoming events.
5. **src/app/page.tsx** — Added `followingIds` query before the parallel block. Added `friendsEvents` (take 3) to the parallel `Promise.all`. Added "Friends' Activity" section in JSX with "See all →" link to /feed.
6. **src/app/layout.tsx** — Added "Feed" link between "My Teams" and "Profile" in the global nav.

### Validation
- `tsc --noEmit` → 0 errors ✅
- `npm run lint` → 0 errors, 4 warnings (intentional `_formData` params) ✅
- No migrations needed (Follow model already in schema from Chunk 2) ✅
